services:
  sellerhelper-be:
    build:
      context: ./sellerhelper-be
      dockerfile: Dockerfile
    image: sellerhelper-be:latest
    container_name: sellerhelper-be
    restart: unless-stopped
    ports:
      - "5080:5080"
    environment:
      SPRING_PROFILES_ACTIVE: prod
      SERVER_PORT: "5080"
      CORS_ALLOWED_ORIGINS: "http://coverdreamit.iptime.org:5000,https://coverdreamit.iptime.org:5000"
      DB_HOST: ${DB_HOST:-coverdreamit.iptime.org}
      DB_PORT: ${DB_PORT:-9432}
      DB_NAME: ${DB_NAME:-sellerhelper}
      DB_USERNAME: ${DB_USERNAME}
      DB_PASSWORD: ${DB_PASSWORD}
  sellerhelper-fe:
    build:
      context: ./sellerhelper-fe
      dockerfile: Dockerfile
      args:
        NEXT_PUBLIC_API_URL: http://sellerhelper-be:5080
    image: sellerhelper-fe:latest
    container_name: sellerhelper-fe
    restart: unless-stopped
    ports:
      - "5000:5000"
    depends_on:
      - sellerhelper-be
    environment:
      PORT: "5000"
      NEXT_PUBLIC_API_URL: http://sellerhelper-be:5080
